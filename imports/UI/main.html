<template name="main">
    <div id="content-wrap">
        <header>
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    <a class="navbar-item" href="/">
                        <h3 class="title is-3 is-family-monospace">Eco Club</h3>
                    </a>

                    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="mainNavbar">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>

                <div id="mainNavbar" class="navbar-menu">
                    <div class="navbar-start">
                        <a class="navbar-item" id="events">
                            <span class="icon"><i class="fas fa-calendar-alt"></i></span>
                            <span>Événements</span>
                        </a>

                        <a class="navbar-item" id="individualInitiatives">
                            <span class="icon"><i class="fas fa-user-graduate"></i></span>
                            <span>Initiatives individuelles</span>
                        </a>

                        <a class="navbar-item" href="/latest-articles">
                            <span class="icon"><i class="fas fa-file-alt"></i></span>
                            <span>Nos derniers articles</span>
                        </a>

                        <a class="navbar-item" href="/search">
                            <span class="icon"><i class="fas fa-search"></i></span>
                            <span>Rechercher</span>
                        </a>

                        <a class="navbar-item" href="/contact">
                            <span class="icon"><i class="fas fa-edit"></i></span>
                            <span>Contact</span>
                        </a>
                    </div>

                    <div class="navbar-end">
                        <div class="navbar-item">
                            {{#if currentUser}}
                                <!-- Displayed only when the user is logged in (display a profile dropdown)-->
                                <div class="navbar-item has-dropdown is-hoverable" id="profileDropdown">
                                    <!-- Dropdown link with user's profile picture -->
                                    <a class="navbar-link">
                                        <img src="/user.svg" alt="Photo de profil" class="image is-48x48"/>
                                    </a>
                                    <!-- Dropdown menu -->
                                    <div class="navbar-dropdown is-right is-hidden-touch">

                                        <a class="navbar-item" href="/dashboard">
                                            <span class="icon"><i class="fas fa-clipboard-list"></i></span>
                                            <span>Tableau de bord</span>
                                        </a>

                                        <a class="navbar-item">
                                            <span class="icon"><i class="fas fa-user"></i></span>
                                            <span>Mes informations</span>
                                        </a>

                                        <hr class="navbar-divider">

                                        <a class="navbar-item logout">
                                            <span class="icon"><i class="fas fa-power-off"></i></span>
                                            <span>Se déconnecter</span>
                                        </a>
                                    </div>
                                </div>
                                <script>
                                    // Script to hide profile dropdown when in mobile mode
                                    $("#profileDropdown .navbar-link").click(function(){
                                        // If navbar is in mobile mode
                                        if($(".navbar-burger").hasClass("is-active")){
                                            // Toggle dropdown options display
                                            $('#profileDropdown .navbar-dropdown').toggleClass("is-hidden-touch");
                                        }
                                    });
                                </script>
                            {{else}}
                                <!-- Display a login button when the user is NOT logged in-->
                                <a href="/login" class="button is-primary">
                                    <strong>Se connecter</strong>
                                </a>
                            {{/if}}
                        </div>
                    </div>
                </div>


            </nav>
            <hr style="margin: 0;">
        </header>


        {{> Template.dynamic template=currentMessage}}  <!-- Display the current message (if there's one) -->
        {{> Template.dynamic template=currentModal}}  <!-- Display the current modal (if there's one) -->

        <br>

        <div class="columns">
            <div class="column is-offset-1 is-7" style="background: white; height: fit-content">
                {{> Template.dynamic template=currentPage}}  <!-- Dynamic Template to display the current page -->
            </div>
            <div class="column is-3">
                <div class="columns is-multiline" id="columnsContainer">
                    {{displayColumns}}
                </div>
            </div>
        </div>
    </div>

    <footer class="footer" style="background-color: #f3f3f3;">

        <p class="has-text-centered subtitle" style="font-style: italic;">Avec le soutien de la région Île de France et l'appui de M. Rihet</p>
        <a href="https://www.iledefrance.fr/" target="_blank">
            <img src="/regionIDF.png" class="image" style="margin: 0 auto; height: 5rem" alt="Logo de la Région Île de France">
        </a>

        <br>
        <p class="has-text-centered subtitle" style="margin-bottom: 0; font-style: italic;">Nos autres partenaires</p>

        <div class="columns width-fit-content" style="margin: 0 auto;">
            <div class="column" style="margin: 0;">
                <a href="https://www.lpo.fr/" target="_blank" alt="Logo de la LPO">
                    <img src="/LPO.jpg" class="image" style="margin: 0 auto; height: 5rem;" alt="Logo de la LPO">
                </a>
            </div>

            <div class="column" style="margin: 0;">
                <a href="http://www.abeille-conflanaise.org/" target="_blank">
                    <img src="/abeilleConflanaise.png" class="image" style="margin: 0 auto; height: 5rem; width: 21rem;" alt="Logo de L'Abeille Conflanaise">
                </a>
            </div>

            <div class="column" style="margin: 0;">
                <a href="https://www.seineouest.fr/" target="_blank">
                    <img src="/grandParisSeineOuest.png" class="image" style="margin: 0 auto; height: 5rem;" alt="Logo du Grand Paris Seine Ouest">
                </a>
            </div>
        </div>

        <br>

        <p class="has-text-centered" style="font-family: 'Changa One';">
            <span>Site réalisé par </span>
            <a href="https://rezarahemtola.com" target="_blank" class="link" style="font-family: 'Changa One';">Reza Rahemtola</a>
        </p>
        <p class="has-text-centered">
            <span>&copy; Eco Club du </span>
            <a href="http://www.lyc-ferry-conflans.ac-versailles.fr/" target="_blank">Lycée Jules Ferry</a>
            <span> de Conflans-Sainte-Honorine</span>
        </p>
    </footer>
</template>
